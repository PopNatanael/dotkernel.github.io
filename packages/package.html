<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Overview of the DotKernel packages.">
    <link rel="canonical" href="https://docs.dotkernel.org/packages/">
    <link rel="shortcut icon" href="https://docs.dotkernel.org/img/cropped-dk_128-32x32.png">
    <title>DotKernel packages documentation</title>
    <link rel="stylesheet" href="../css/bootstrap.css">
    <link rel="stylesheet" href="../css/bootstrap-icons.min.css">
    <link rel="stylesheet" href="../css/docs.css">
</head>
<body id="page-top" class="packages" data-bs-spy="scroll" data-bs-target=".toc" data-bs-offset="100">

<nav class="navbar navbar-expand-lg bg-body-tertiary bg-dark dk-nav py-3" data-bs-theme="dark">
    <div class="container justify-content-between">
        <div class="dk-nav-icon d-flex align-items-center">
            <a class="navbar-brand" href="#">
                <img src="../img/dk_logomark_white.svg" alt="Logo" width="45" height="50"
                     class="d-inline-block align-text-top">
            </a>

            <div class="dk-nav-icon-items">
                <span style="font-size: 12px; line-height: 13px">Dotkernel Documentation</span>
                <div class="dropdown" data-bs-theme="light">
                    <span class="fw-bold dropdown-toggle dk-pkg-name" data-bs-toggle="dropdown" aria-expanded="false">Packages</span>
                    <ul class="dropdown-menu">
                        <li class="dropdown-item ">
                            <a href="https://docs.dotkernel.org/frontend/" target="_blank"
                               class="nav-link d-flex gap-4 align-items-center">
                                <img src="../img/dk_logomark.svg" alt="Logo" width="45" height="50"
                                     class="d-inline-block align-text-top">
                                <div>
                                    <span class="fw-bold">Dotkernel</span>
                                    <p>Dotkernel frontend application</p>
                                </div>
                            </a>
                        </li>

                        <li class="dropdown-item ">
                            <a href="https://docs.dotkernel.org/admin/" target="_blank"
                               class="nav-link d-flex gap-4 align-items-center">
                                <img src="../img/dk_logomark.svg" alt="Logo" width="45" height="50"
                                     class="d-inline-block align-text-top">
                                <div>
                                    <span class="fw-bold">Admin</span>
                                    <p>Dotkernel admin application</p>
                                </div>
                            </a>
                        </li>

                        <li class="dropdown-item ">
                            <a href="https://docs.dotkernel.org/api/" target="_blank"
                               class="nav-link d-flex gap-4 align-items-center">
                                <img src="../img/dk_logomark.svg" alt="Logo" width="45" height="50"
                                     class="d-inline-block align-text-top">
                                <div>
                                    <span class="fw-bold">API</span>
                                    <p>Dotkernel API</p>
                                </div>
                            </a>
                        </li>

                        <li class="dropdown-item ">
                            <a href="https://docs.dotkernel.org/packages/" target="_blank"
                               class="nav-link d-flex gap-4 align-items-center">
                                <img src="../img/dk_logomark.svg" alt="Logo" width="45" height="50"
                                     class="d-inline-block align-text-top">
                                <div>
                                    <span class="fw-bold">Packages</span>
                                    <p>Dotkernel packages</p>
                                </div>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarText"
                aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarText">
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a href="https://www.dotkernel.com/contact/" target="_blank" class="nav-link fw-bold text-white"
                       aria-current="page">Contact Us</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link fw-bold text-white" href="https://github.com/dotkernel" target="_blank">
                        <i class="bi bi-github"></i>
                        GitHub
                    </a>
                </li>

                <li class="nav-item">
                    <a href="#" class="nav-link fw-bold text-white" data-bs-toggle="modal"
                       data-bs-target="#mkdocs_search_modal" title="Open search">
                        <i class="bi bi-search"></i> Search
                    </a>
                </li>

            </ul>
        </div>
    </div>
</nav>

<div class="container">
    <nav aria-label="breadcrumb" class="nav_breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="https://docs.dotkernel.org/">Overview</a></li>
            <li class="breadcrumb-item"><a href="https://docs.dotkernel.org/packages/">Packages</a></li>
            <li class="breadcrumb-item"><a href="../..">dot-event</a></li>
            <li class="breadcrumb-item active" aria-current="page">Usage</li>
        </ol>
    </nav>
</div>

<div class="container">

    <div class="row">

        <!--        Left TOC-->
        <div class="col-md-2 left_sidebar">
            <div class="toc">
                <h6 class="toc__headline fw-bold">On this page</h6>
                <ul class="toc__list">

                    <li class="toc__entry">
                        <a href="#example" class="toc__link nav-link">Example</a>
                    </li>

                    <li class="toc__entry">
                        <a href="#keep-all-in-order" class="toc__link nav-link">Keep all in order</a>
                    </li>

                    <li class="toc__entry">
                        <a href="#short-circuiting-the-execution" class="toc__link nav-link">Short-circuiting the
                            execution</a>
                    </li>

                    <li class="toc__entry">
                        <a href="#returns" class="toc__link nav-link">Returns</a>
                    </li>

                </ul>
            </div>
        </div>

        <!--        CONTENT-->
        <div class="col-md-8 main_docs">

            <h1 id="usage"><a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="#usage"
                              style="font-style: normal; font-variant: normal; font-kerning: auto; font-optical-sizing: auto; font-feature-settings: normal; font-variation-settings: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: inherit; font-family: anchorjs-icons; position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Usage
            </h1>
            <p>This tutorial explores various examples of dot-event usages.</p>
            <p>To start using events you will need the following things:</p>
            <ul>
                <li>An <strong>Event</strong></li>
                <li>One or more <strong>listeners</strong> that will be registered on the application config ( <code>ConfigProvider</code>
                    )
                </li>
                <li>An instance of <strong>EventManager</strong> from the <strong>container</strong> so you can trigger
                    the events
                </li>
            </ul>
            <p>The listeners needs to be registered in the <code>ConfigProvider</code>, under the
                <code>['dot-event']</code> key</p>
            <h2 id="example"><a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="#example"
                                style="font-style: normal; font-variant: normal; font-kerning: auto; font-optical-sizing: auto; font-feature-settings: normal; font-variation-settings: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: inherit; font-family: anchorjs-icons; position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Example
            </h2>
            <p>The below example will implement an event for update users.</p>
            <p>Every event needs to extends <code>Dot\Event\Event</code></p>
            <pre class="highlight line-numbers language-php" tabindex="0"><i class="bi bi-copy copy_btn" onclick="copy(this)"></i><code class="language-php"><span
                    class="token keyword">class</span> <span
                    class="token class-name-definition class-name">UserEvent</span> <span
                    class="token keyword">extends</span> <span class="token class-name">Event</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">const</span> <span class="token constant">EVENTS_PRE_UPDATE</span> <span
                        class="token operator">=</span> <span class="token string single-quoted-string">'pre.update.user'</span><span
                        class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">const</span> <span class="token constant">EVENTS_POST_UPDATE</span> <span
                        class="token operator">=</span> <span class="token string single-quoted-string">'post.update.user'</span><span
                        class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span
                        class="token function-definition function">__construct</span><span
                        class="token punctuation">(</span><span class="token variable">$name</span> <span
                        class="token operator">=</span> <span class="token constant">null</span><span
                        class="token punctuation">,</span> <span class="token variable">$target</span> <span
                        class="token operator">=</span> <span class="token constant">null</span><span
                        class="token punctuation">,</span> <span class="token variable">$params</span> <span
                        class="token operator">=</span> <span class="token punctuation">[</span><span
                        class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token scope"><span class="token keyword">parent</span><span
                class="token punctuation">::</span></span><span class="token function">__construct</span><span
                        class="token punctuation">(</span><span class="token variable">$name</span><span
                        class="token punctuation">,</span> <span class="token variable">$target</span><span
                        class="token punctuation">,</span> <span class="token variable">$params</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span aria-hidden="true"
                                              class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
            <p>We use the concept of listener aggregates because with this approach in a single class
                we can listen to multiple events. If you pay attention, in the above event we have 2 events
                <code>pre.update.user</code> and <code>post.update.user</code></p>
            <p>Every listener needs to extend <code>Dot\Event\ControllerEventListenerInterface</code>. The interface
                defines two methods <code>attach()</code> and <code>detach()</code></p>
            <pre class="highlight line-numbers language-php" tabindex="0"><code class="language-php"><span
                    class="token keyword">class</span> <span class="token class-name-definition class-name">UserEventListener</span> <span
                    class="token keyword">implements</span> <span
                    class="token class-name">DotEventListenerInterface</span>
<span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token package">ListenerAggregateTrait</span><span
                        class="token punctuation">;</span>

    <span class="token attribute"><span class="token delimiter punctuation">#[</span><span
            class="token attribute-content"><span
            class="token attribute-class-name class-name class-name-fully-qualified">Dot<span class="token punctuation">\</span>AnnotatedServices<span
            class="token punctuation">\</span>Attribute<span class="token punctuation">\</span>Inject</span><span
            class="token punctuation">(</span><span class="token attribute-class-name class-name">Logger</span><span
            class="token operator">::</span><span class="token constant">class</span><span
            class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span
                        class="token function-definition function">__construct</span><span
                        class="token punctuation">(</span><span class="token keyword">private</span> <span
                        class="token class-name type-declaration">Logger</span> <span
                        class="token variable">$logger</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span
                        class="token function-definition function">attach</span><span class="token punctuation">(</span><span
                        class="token class-name type-declaration">EventManagerInterface</span> <span
                        class="token variable">$events</span><span class="token punctuation">,</span> <span
                        class="token variable">$priority</span> <span class="token operator">=</span> <span
                        class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span
                        class="token property">listeners</span><span class="token punctuation">[</span><span
                        class="token punctuation">]</span> <span class="token operator">=</span> <span
                        class="token variable">$events</span><span class="token operator">-&gt;</span><span
                        class="token function">attach</span><span class="token punctuation">(</span><span
                        class="token scope">UserUpdatedEvent<span class="token punctuation">::</span></span><span
                        class="token constant">EVENTS_PRE_UPDATE</span><span class="token punctuation">,</span> <span
                        class="token punctuation">[</span><span class="token this keyword">$this</span><span
                        class="token punctuation">,</span> <span class="token string single-quoted-string">'onUserPreUpdated'</span><span
                        class="token punctuation">]</span><span class="token punctuation">)</span><span
                        class="token punctuation">;</span>
        <span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span
                        class="token property">listeners</span><span class="token punctuation">[</span><span
                        class="token punctuation">]</span> <span class="token operator">=</span> <span
                        class="token variable">$events</span><span class="token operator">-&gt;</span><span
                        class="token function">attach</span><span class="token punctuation">(</span><span
                        class="token scope">UserUpdatedEvent<span class="token punctuation">::</span></span><span
                        class="token constant">EVENTS_POST_UPDATE</span><span class="token punctuation">,</span> <span
                        class="token punctuation">[</span><span class="token this keyword">$this</span><span
                        class="token punctuation">,</span> <span class="token string single-quoted-string">'onUserPostUpdate'</span><span
                        class="token punctuation">]</span><span class="token punctuation">)</span><span
                        class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span
                        class="token function-definition function">onUserPreUpdated</span><span
                        class="token punctuation">(</span><span
                        class="token class-name type-declaration">UserEvent</span> <span
                        class="token variable">$event</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span
                        class="token property">logger</span><span class="token operator">-&gt;</span><span
                        class="token function">info</span><span class="token punctuation">(</span><span
                        class="token string single-quoted-string">'The pre update event is triggered'</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//...more logic</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span
                        class="token function-definition function">onUserPostUpdate</span><span
                        class="token punctuation">(</span><span
                        class="token class-name type-declaration">UserEvent</span> <span
                        class="token variable">$event</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//...more logic</span>

        <span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span
                        class="token property">logger</span><span class="token operator">-&gt;</span><span
                        class="token function">info</span><span class="token punctuation">(</span><span
                        class="token string single-quoted-string">'The post update event is triggered'</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span aria-hidden="true"
                                              class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
            <blockquote>
                <p><strong>NOTE</strong></p>
                <p>The trait <code>Laminas\EventManager\ListenerAggregateTrait</code> can be used to help implementing
                    <code>DotEventListenerInterface</code>. It defines the <code>$listeners</code> property, and <code>detach()</code>
                    logic</p>
            </blockquote>
            <p>We register the listener in the <code>ConfigProvider</code></p>
            <pre class="highlight line-numbers language-php" tabindex="0"><code class="language-php"><span
                    class="token string single-quoted-string">'dot-event'</span> <span
                    class="token operator">=&gt;</span> <span class="token punctuation">[</span>
    <span class="token scope">UserEventListener<span class="token punctuation">::</span></span><span
                        class="token keyword">class</span>
<span class="token punctuation">]</span><span aria-hidden="true"
                                              class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
            <p>Every event can be triggered from an <code>Laminas\EventManager\EventManager</code> instance loaded
                from the container</p>
            <pre class="highlight line-numbers language-php" tabindex="0"><code class="language-php"><span
                    class="token keyword">class</span> <span
                    class="token class-name-definition class-name">MyService</span>
<span class="token punctuation">{</span>
    <span class="token attribute"><span class="token delimiter punctuation">#[</span><span
            class="token attribute-content"><span
            class="token attribute-class-name class-name class-name-fully-qualified">Dot<span class="token punctuation">\</span>AnnotatedServices<span
            class="token punctuation">\</span>Attribute<span class="token punctuation">\</span>Inject</span><span
            class="token punctuation">(</span><span
            class="token attribute-class-name class-name">EventManagerInterface</span><span
            class="token operator">::</span><span class="token constant">class</span><span
            class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span
                        class="token function-definition function">__construct</span><span
                        class="token punctuation">(</span><span class="token keyword">private</span> <span
                        class="token class-name type-declaration">EventManagerInterface</span> <span
                        class="token variable">$eventManager</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span
                        class="token function-definition function">update</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span
                        class="token property">eventManager</span><span class="token operator">-&gt;</span><span
                        class="token function">triggerEvent</span><span class="token punctuation">(</span><span
                        class="token keyword">new</span> <span class="token class-name">UserEvent</span><span
                        class="token punctuation">(</span><span class="token scope">UserEvent<span
                        class="token punctuation">::</span></span><span
                        class="token constant">EVENTS_PRE_UPDATE</span><span class="token punctuation">,</span> <span
                        class="token argument-name">params</span><span class="token punctuation">:</span> <span
                        class="token punctuation">[</span><span class="token string single-quoted-string">'user'</span> <span
                        class="token operator">=&gt;</span> <span class="token variable">$user</span><span
                        class="token punctuation">]</span><span class="token punctuation">)</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// ... logic of update</span>

        <span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span
                        class="token property">eventManager</span><span class="token operator">-&gt;</span><span
                        class="token function">triggerEvent</span><span class="token punctuation">(</span><span
                        class="token keyword">new</span> <span class="token class-name">UserEvent</span><span
                        class="token punctuation">(</span><span class="token scope">UserEvent<span
                        class="token punctuation">::</span></span><span class="token constant">EVENTS_POST_UPDATE</span><span
                        class="token punctuation">,</span> <span class="token argument-name">params</span><span
                        class="token punctuation">:</span> <span class="token punctuation">[</span><span
                        class="token string single-quoted-string">'user'</span> <span
                        class="token operator">=&gt;</span> <span class="token variable">$user</span><span
                        class="token punctuation">]</span><span class="token punctuation">)</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true"
                                              class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
            <blockquote>
                <p><strong>NOTE</strong></p>
                <p>To inject classes from the container we use <code>Dot\AnnotatedServices\Attribute\Inject</code> from
                    <code>dot-annotated-services</code> package, but you can use your own logic to get things from
                    the container</p>
            </blockquote>
            <h2 id="keep-all-in-order"><a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon=""
                                          href="#keep-all-in-order"
                                          style="font-style: normal; font-variant: normal; font-kerning: auto; font-optical-sizing: auto; font-feature-settings: normal; font-variation-settings: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: inherit; font-family: anchorjs-icons; position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Keep
                all in order</h2>
            <p>You can attach multiple listeners to the same event but with different logic.</p>
            <p>All listeners are executed in the order in which they are attached. However, you can provide a priority
                value
                and you can influence the order of the execution</p>
            <ul>
                <li>Higher priority values execute earlier.</li>
                <li>Lower (negative) priority values execute later.</li>
            </ul>
            <pre class="highlight line-numbers language-php" tabindex="0"><code class="language-php"><span
                    class="token keyword">class</span> <span class="token class-name-definition class-name">UserEventListener</span> <span
                    class="token keyword">implements</span> <span
                    class="token class-name">DotEventListenerInterface</span>
<span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token package">ListenerAggregateTrait</span><span
                        class="token punctuation">;</span>

    <span class="token attribute"><span class="token delimiter punctuation">#[</span><span
            class="token attribute-content"><span
            class="token attribute-class-name class-name class-name-fully-qualified">Dot<span class="token punctuation">\</span>AnnotatedServices<span
            class="token punctuation">\</span>Attribute<span class="token punctuation">\</span>Inject</span><span
            class="token punctuation">(</span><span class="token attribute-class-name class-name">Logger</span><span
            class="token operator">::</span><span class="token constant">class</span><span
            class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span
                        class="token function-definition function">__construct</span><span
                        class="token punctuation">(</span><span class="token keyword">private</span> <span
                        class="token class-name type-declaration">Logger</span> <span
                        class="token variable">$logger</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span
                        class="token function-definition function">attach</span><span class="token punctuation">(</span><span
                        class="token class-name type-declaration">EventManagerInterface</span> <span
                        class="token variable">$events</span><span class="token punctuation">,</span> <span
                        class="token variable">$priority</span> <span class="token operator">=</span> <span
                        class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span
                        class="token property">listeners</span><span class="token punctuation">[</span><span
                        class="token punctuation">]</span> <span class="token operator">=</span> <span
                        class="token variable">$events</span><span class="token operator">-&gt;</span><span
                        class="token function">attach</span><span class="token punctuation">(</span><span
                        class="token scope">UserUpdatedEvent<span class="token punctuation">::</span></span><span
                        class="token constant">EVENTS_POST_UPDATE</span><span class="token punctuation">,</span> <span
                        class="token punctuation">[</span><span class="token this keyword">$this</span><span
                        class="token punctuation">,</span> <span class="token string single-quoted-string">'onUserPostUpdateSecond'</span><span
                        class="token punctuation">]</span><span class="token punctuation">,</span> <span
                        class="token number">1</span><span class="token punctuation">)</span><span
                        class="token punctuation">;</span> <span class="token comment">// will run second</span>
        <span class="token this keyword">$this</span><span class="token operator">-&gt;</span><span
                        class="token property">listeners</span><span class="token punctuation">[</span><span
                        class="token punctuation">]</span> <span class="token operator">=</span> <span
                        class="token variable">$events</span><span class="token operator">-&gt;</span><span
                        class="token function">attach</span><span class="token punctuation">(</span><span
                        class="token scope">UserUpdatedEvent<span class="token punctuation">::</span></span><span
                        class="token constant">EVENTS_POST_UPDATE</span><span class="token punctuation">,</span> <span
                        class="token punctuation">[</span><span class="token this keyword">$this</span><span
                        class="token punctuation">,</span> <span class="token string single-quoted-string">'onUserPostUpdateFirst'</span><span
                        class="token punctuation">]</span><span class="token punctuation">,</span> <span
                        class="token number">2</span><span class="token punctuation">)</span><span
                        class="token punctuation">;</span> <span class="token comment">// will run first</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ... callbacks</span>

<span class="token punctuation">}</span><span aria-hidden="true"
                                              class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
            <p>As you can notice, we attach the same event name to listeners, so once we trigger the event both
                callback will run one after another. But because we provide priority, the second attach will run first
                because has a higher priority.</p>
            <h2 id="short-circuiting-the-execution"><a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon=""
                                                       href="#short-circuiting-the-execution"
                                                       style="font-style: normal; font-variant: normal; font-kerning: auto; font-optical-sizing: auto; font-feature-settings: normal; font-variation-settings: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: inherit; font-family: anchorjs-icons; position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Short-circuiting
                the execution</h2>
            <p>Sometimes you have more listeners to an event, and you may want to stop the execution of the event if
                something is wrong
                in one of the listeners.</p>
            <pre class="highlight line-numbers language-php" tabindex="0"><code class="language-php"><span
                    class="token keyword">public</span> <span class="token keyword">function</span> <span
                    class="token function-definition function">onUserPostUpdateFirst</span><span
                    class="token punctuation">(</span><span
                    class="token class-name type-declaration">UserEvent</span> <span
                    class="token variable">$event</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token variable">$event</span><span class="token operator">-&gt;</span><span class="token function">stopPropagation</span><span
                        class="token punctuation">(</span><span class="token punctuation">)</span><span
                        class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">function</span> <span
                        class="token function-definition function">onUserPostUpdateSecond</span><span
                        class="token punctuation">(</span><span
                        class="token class-name type-declaration">UserEvent</span> <span
                        class="token variable">$event</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>

    <span class="token comment">// this will not execute</span>

<span class="token punctuation">}</span><span aria-hidden="true"
                                              class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
            <h2 id="returns"><a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" href="#returns"
                                style="font-style: normal; font-variant: normal; font-kerning: auto; font-optical-sizing: auto; font-feature-settings: normal; font-variation-settings: normal; font-weight: normal; font-stretch: normal; font-size: 1em; line-height: inherit; font-family: anchorjs-icons; position: absolute; margin-left: -1em; padding-right: 0.5em;"></a>Returns
            </h2>
            <p>You can return whatever you want in a listener callback. All events trigger returns an instance of
                <code>Laminas\EventManager\ResponseCollection</code> so you can have information if the event has
                stopped, or if event
                returned some expected object.</p>
            <pre class="highlight line-numbers language-php" tabindex="0"><code class="language-php"><span
                    class="token keyword">class</span> <span
                    class="token class-name-definition class-name">MyService</span>
<span class="token punctuation">{</span>
    <span class="token attribute"><span class="token delimiter punctuation">#[</span><span
            class="token attribute-content"><span
            class="token attribute-class-name class-name class-name-fully-qualified">Dot<span class="token punctuation">\</span>AnnotatedServices<span
            class="token punctuation">\</span>Attribute<span class="token punctuation">\</span>Inject</span><span
            class="token punctuation">(</span><span
            class="token attribute-class-name class-name">EventManagerInterface</span><span
            class="token operator">::</span><span class="token constant">class</span><span
            class="token punctuation">)</span></span><span class="token delimiter punctuation">]</span></span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span
                        class="token function-definition function">__construct</span><span
                        class="token punctuation">(</span><span class="token keyword">private</span> <span
                        class="token class-name type-declaration">EventManagerInterface</span> <span
                        class="token variable">$eventManager</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span
                        class="token function-definition function">update</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">/** @var Laminas\EventManager\ResponseCollection $result */</span>
        <span class="token variable">$result</span>  <span class="token operator">=</span> <span
                        class="token this keyword">$this</span><span class="token operator">-&gt;</span><span
                        class="token property">eventManager</span><span class="token operator">-&gt;</span><span
                        class="token function">triggerEvent</span><span class="token punctuation">(</span><span
                        class="token keyword">new</span> <span class="token class-name">UserEvent</span><span
                        class="token punctuation">(</span><span class="token scope">UserEvent<span
                        class="token punctuation">::</span></span><span class="token constant">EVENTS_POST_UPDATE</span><span
                        class="token punctuation">,</span> <span class="token argument-name">params</span><span
                        class="token punctuation">:</span> <span class="token punctuation">[</span><span
                        class="token string single-quoted-string">'user'</span> <span
                        class="token operator">=&gt;</span> <span class="token variable">$user</span><span
                        class="token punctuation">]</span><span class="token punctuation">)</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$result</span><span class="token operator">-&gt;</span><span
                        class="token function">stopped</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span> <span
                        class="token comment">// true or false if propagation is stopped</span>
        <span class="token variable">$result</span><span class="token operator">-&gt;</span><span
                        class="token function">first</span><span class="token punctuation">(</span><span
                        class="token punctuation">)</span><span class="token punctuation">;</span> <span
                        class="token comment">// what last listener has returned (on multiple listeners it uses LIFO mode)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span aria-hidden="true"
                                              class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


            <nav>
                <ul class="page-nav hidden-print">

                    <li class="page-nav__item">

                        <a rel="prev" class="page-nav__link page-nav__link--prev" href="../configuration/">
                            <small class="page-nav__label">Previous</small>
                            <i class="bi bi-chevron-left"></i>
                            Configuration
                        </a>

                    </li>


                    <li class="page-nav__item">
                        <a rel="next" class="page-nav__link page-nav__link--next" href="../usage/">
                            <small class="page-nav__label">Next</small>
                            Usage
                            <i class="bi bi-chevron-right"></i>
                        </a>
                    </li>
                </ul>
            </nav>

        </div>

        <!--        Right TOC-->
        <div class="col-md-2 right_sidebar">

            <div class="subnavigation hidden-print">
                <h4 class="subnavigation__title">
                    <a href="../..">dot-event</a>
                </h4>

                <ul class="subnavigation__list">


                    <li class="subnavigation__list-item ">
                        <a href="../overview/" class="subnavigation__link">Overview</a>
                    </li>


                    <li class="subnavigation__list-item ">
                        <a href="../installation/" class="subnavigation__link">Installation</a>
                    </li>


                    <li class="subnavigation__list-item ">
                        <a href="../configuration/" class="subnavigation__link">Configuration</a>
                    </li>


                    <li class="subnavigation__list-item subnavigation__list-item--active">
                        <a href="./" class="subnavigation__link">Usage</a>
                    </li>


                </ul>
            </div>
        </div>

    </div>


</div>


<footer class="footer">
    <div class="container">

        <div class="row">
            <div class="col-md-9">
                <div class="footer_head">
                    <p>DotKernel</p>
                </div>

                <div class="row">
                    <div class="col-md-6 dk_widget">
                        <p>DotKernel Frontend</p>
                        <a href="https://docs.dotkernel.org/frontend/" target="_blank">
                            <i class="bi bi-arrow-return-right"></i>
                            DotKernel web starter project suitable for frontend applications
                        </a>
                    </div>

                    <div class="col-md-6 dk_widget">
                        <p>DotKernel API</p>
                        <a href="https://docs.dotkernel.org/api/" target="_blank">
                            <i class="bi bi-arrow-return-right"></i>
                            DotKernel web starter project suitable for building RESTful APIs
                        </a>
                    </div>

                    <div class="col-md-6 dk_widget">
                        <p>DotKernel Admin</p>

                        <a href="https://docs.dotkernel.org/admin/" target="_blank">
                            <i class="bi bi-arrow-return-right"></i>
                            DotKernel web starter project suitable for admin applications
                        </a>
                    </div>

                    <div class="col-md-6 dk_widget">
                        <p>DotKernel Packages</p>
                        <a href="https://docs.dotkernel.org/packages/" target="_blank">
                            <i class="bi bi-arrow-return-right"></i>
                            DotKernel packages offering a wide range of tools
                        </a>
                    </div>
                </div>

            </div>

            <div class="col-md-3">
                <div class="footer_head">
                    <p>Support</p>
                </div>
                <ul class="support__list">
                    <li class="support__list-item">
                        <a href="https://github.com/dotkernel" class="support__link" title="Github" target="_blank">
                            <i class="bi bi-github"></i> Github
                        </a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://dotkernel.slack.com" class="support__link" title="Chat" target="_blank">
                            <i class="bi bi-slack"></i> Slack
                        </a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://twitter.com/dotkernel" class="support__link" title="X (Twitter)"
                           target="_blank">
                            <i class="bi bi-twitter-x"></i> Twitter
                        </a>
                    </li>

                    <li class="support__list-item">
                        <a href="https://www.dotkernel.com/blog/" class="support__link" title="Blog" target="_blank">
                            <i class="bi bi-file-post"></i> Blog
                        </a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://www.dotkernel.com/feed/" class="support__link" title="Blog feed"
                           target="_blank">
                            <i class="bi bi-rss-fill"></i> Feed
                        </a>
                    </li>
                </ul>
            </div>
        </div>

        <div class="footer_copy">
            &#169; 2024 Dotkernel
        </div>
    </div>
</footer>


<div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal"
     aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Search</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search in dot-event"
                               id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
        </div>
    </div>
</div>
<script src="../js/bootstrap.js"></script>
<script src="../js/docs.js"></script>

<script>
    function copy(text){
        const parent = text.parentElement
        const code = parent.querySelector('code');
        const range = document.createRange();
        range.selectNode(code);
        window.getSelection().removeAllRanges();
        window.getSelection().addRange(range);
        if (!navigator.clipboard){
            document.execCommand('copy');
        } else {
            try {
                navigator.clipboard.writeText(range.toString())
            } catch (error){}
        }
    }
</script>

</body>
</html>
